
## 5. pip, зависимости и виртуальные окружения

### 5.1 Что такое внешние библиотеки и как они устроены

Сторонние библиотеки в Python распространяются как **пакеты**, опубликованные в PyPI ([https://pypi.org](https://pypi.org)).
Пакет включает:

* исходный код Python,
* скомпилированные расширения (если есть C-модули),
* метаданные версии и зависимостей.

Установка происходит через `pip`, который скачивает пакеты и кладёт их в директорию `site-packages`.

### 5.2 Зачем нужны виртуальные окружения и как они спасают нервы

Виртуальное окружение — это изолированная копия интерпретатора Python с собственной папкой `site-packages`.

Зачем это нужно:

* разные проекты могут требовать разные версии библиотек;
* обновление одной зависимости не ломает другую систему;
* можно безопасно экспериментировать без риска повредить системный Python.

Создание окружения:

```bash
python3 -m venv venv
source venv/bin/activate
```

### 5.3 venv vs conda (кратко)

**venv**

* встроенный в Python инструмент;
* лёгкий, минималистичный;
* управляет только окружением Python.

**conda**

* менеджер пакетов и окружений в одном;
* умеет ставить бинарные зависимости (NumPy, CUDA, библиотеки C);
* полезен в научных задачах, где важны готовые сборки.

Если важна простота и совместимость — venv.
Если нужна сборка научных пакетов без боли — conda.

### 5.4 Установка пакетов, обновления и где всё хранится

Установка:

```bash
pip install numpy
```

Обновление:

```bash
pip install --upgrade numpy
```

Список пакетов:

```bash
pip list
```

Экспорт зависимостей:

```bash
pip freeze > requirements.txt
```

Где хранится:

* в виртуальном окружении → `venv/lib/pythonX.Y/site-packages`
* при системной установке → системные пути `site-packages`

Главная идея: библиотека существует не «в воздухе», а физически лежит в директории, которую Python знает как часть пути поиска импортов.

